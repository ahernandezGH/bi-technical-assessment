# PASO 6: Crear Pull Request - Gu√≠a Visual

## üéØ OPCI√ìN 1: Crear PR Manualmente (Recomendado)

### Paso 1: Abre el enlace en tu navegador

Copia y pega en tu navegador:
```
https://github.com/ahernandezGH/bi-technical-assessment/pull/new/solution-testcandidate-issue001
```

Deber√≠as ver una pantalla como esta:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Comparing changes                                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  main ‚Üê solution-testcandidate-issue001                        ‚îÇ
‚îÇ  ‚îú‚îÄ Base: main                                                  ‚îÇ
‚îÇ  ‚îî‚îÄ Compare: solution-testcandidate-issue001                    ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Able to merge. These branches can be automatically merged.    ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  üìù 3 commits with changes                                      ‚îÇ
‚îÇ     ‚Ä¢ 9f1afe8 - feat: Add test solution for Issue001           ‚îÇ
‚îÇ     ‚Ä¢ ...                                                       ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Create a pull request                                    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### Paso 2: Rellena el T√çTULO del PR

En el campo "Title", ingresa **EXACTAMENTE** esto:

```
Solution - TestCandidate - Issue [001]
```

**‚ö†Ô∏è IMPORTANTE**: 
- Debe ser EXACTO (case-sensitive)
- Espacio-gui√≥n-espacio: ` - ` (3 caracteres)
- N√∫mero entre corchetes: `[001]` (3 d√≠gitos)

**‚ùå NO hagas esto**:
- ‚ùå `Solution to Issue 001`
- ‚ùå `Solution - TestCandidate - Issue 1`
- ‚ùå `solution - TestCandidate - Issue [001]` (lowercase)
- ‚ùå `Solution - TestCandidate - Issue [1]` (solo 1 d√≠gito)

**‚úÖ Formato correcto**:
```
Solution - [NOMBRE] - Issue [00X]
           ‚Üë Flexible    ‚Üë Formato [00X]
```

---

### Paso 3: Rellena el CUERPO (Body) - OPCIONAL pero recomendado

Haz clic en el campo de descripci√≥n y copia-pega:

```markdown
# Test Submission - Issue 001

## Summary
Testing the automated grading workflow for validation integrity check.

## Files Included
- QA_ValidarIntegridadEstudiantes.sql
- PROC_ValidarIntegridadPreInsert.sql
- SOLUTION.md

## How It Works
Detect orphan foreign keys in matricula table using LEFT JOIN pattern.

## Testing
This solution implements:
1. Query to find hu√©rfanos in the matricula table
2. Stored procedure for integrity validation
3. Documentation of approach

---
This is a test PR to verify the GitHub Actions CI/CD workflow.
```

---

### Paso 4: Click "Create pull request"

En la parte inferior derecha, haz clic en el bot√≥n verde:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚úèÔ∏è  [Draft]                         ‚îÇ
‚îÇ  [Create pull request] ‚Üê CLICK AQU√ç  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ OPCI√ìN 2: Crear PR Autom√°ticamente (con GitHub Token)

Si tienes un token de GitHub configurado, ejecuta:

```powershell
# En PowerShell (en el directorio del repositorio)
.\Create-TestPR.ps1
```

**Qu√© hace el script**:
1. Valida que tengas token en `$env:GITHUB_TOKEN`
2. Prepara datos del PR
3. Env√≠a solicitud a GitHub API
4. Muestra el URL del PR creado
5. Imprime instrucciones para monitorear

**Ejemplo de ejecuci√≥n**:
```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
CREATING TEST PULL REQUEST
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìã Detalles del PR:
   T√≠tulo: Solution - TestCandidate - Issue [001]
   Rama: solution-testcandidate-issue001
   Base: main

üîÑ Enviando solicitud a GitHub API...

‚úÖ PR CREADO EXITOSAMENTE

üìå Detalles del PR:
   PR Number: #45
   URL: https://github.com/ahernandezGH/bi-technical-assessment/pull/45
   State: open
   Created: 2025-12-30T14:32:00Z

üöÄ Workflow deber√≠a triggeriarse en ~10 segundos
   Monitorea el progreso en:
   https://github.com/ahernandezGH/bi-technical-assessment/actions
```

---

## üîç ¬øQU√â PASA DESPU√âS DE CREAR EL PR?

### Timeline Esperado

```
T+0s     : PR creado
           ‚îú‚îÄ GitHub detecta cambios en rama
           ‚îî‚îÄ Busca GitHub Actions workflows

T+5-10s  : Workflow "Validate Solution" se INICIA
           ‚îú‚îÄ Trigger: PR abierto
           ‚îî‚îÄ Regex: ^Solution - .+ - Issue \[\d{3}\]$ ‚úÖ

T+10s    : Job 1: parse-pr-title
           ‚îú‚îÄ Runner: ubuntu-latest
           ‚îú‚îÄ Acci√≥n: Extrae "TestCandidate" + "001"
           ‚îî‚îÄ Duraci√≥n: ~10 segundos

T+20s    : Job 2: validate-solution INICIA
           ‚îú‚îÄ Runner: windows-latest
           ‚îú‚îÄ Paso 1: Setup SQL Server 2019
           ‚îÇ          ‚îî‚îÄ Duraci√≥n: 30-40s
           ‚îÇ
           ‚îú‚îÄ Paso 2: Load Databases
           ‚îÇ          ‚îú‚îÄ Crea [BI_Assessment_Source]
           ‚îÇ          ‚îú‚îÄ Crea [BI_Assessment_Staging]
           ‚îÇ          ‚îú‚îÄ Crea [BI_Assessment_DWH]
           ‚îÇ          ‚îî‚îÄ Duraci√≥n: 20s
           ‚îÇ
           ‚îú‚îÄ Paso 3: Load Candidate Files
           ‚îÇ          ‚îú‚îÄ QA_*.sql
           ‚îÇ          ‚îú‚îÄ PROC_*.sql
           ‚îÇ          ‚îú‚îÄ SOLUTION.md (word count)
           ‚îÇ          ‚îî‚îÄ Duraci√≥n: 10s
           ‚îÇ
           ‚îú‚îÄ Paso 4: Validate-Solution.ps1
           ‚îÇ          ‚îú‚îÄ Ejecuta 27 checks
           ‚îÇ          ‚îú‚îÄ Genera score
           ‚îÇ          ‚îî‚îÄ Duraci√≥n: 60-90s
           ‚îÇ
           ‚îî‚îÄ Paso 5: Post Comment
                      ‚îî‚îÄ Duraci√≥n: 5s

T+5-8min : ‚úÖ WORKFLOW COMPLETA
           ‚îú‚îÄ Jobs: parse-pr-title ‚úÖ, validate-solution ‚úÖ
           ‚îú‚îÄ PR Comment: Auto-posted ‚úÖ
           ‚îî‚îÄ Score visible: 70/100 ‚úÖ PASS
```

---

## üìä VER RESULTADOS

### En GitHub.com

1. **Abre tu PR**:
   ```
   https://github.com/ahernandezGH/bi-technical-assessment/pull/[NUMERO]
   ```

2. **Busca el Workflow Comment** (deber√≠a aparecer en la pesta√±a "Conversation"):
   ```
   ‚úÖ Solution Validation Result
   
   Score: 70/100
   Status: PASS
   
   [Detalles expandibles]
   ```

3. **Verifica la pesta√±a "Checks"**:
   - ‚úÖ parse-pr-title
   - ‚úÖ validate-solution

### En GitHub Actions Tab

1. Ve a: `https://github.com/ahernandezGH/bi-technical-assessment/actions`

2. Busca "Validate Solution" workflow m√°s reciente

3. Haz clic para ver detalles:
   ```
   Validate Solution #4567
   
   Jobs:
   ‚îú‚îÄ parse-pr-title
   ‚îÇ  ‚îú‚îÄ Status: ‚úÖ Passed
   ‚îÇ  ‚îú‚îÄ Duration: 10s
   ‚îÇ  ‚îî‚îÄ Logs...
   ‚îÇ
   ‚îî‚îÄ validate-solution
      ‚îú‚îÄ Status: ‚úÖ Passed
      ‚îú‚îÄ Duration: 5m 30s
      ‚îî‚îÄ Logs...
   ```

---

## ‚ö†Ô∏è TROUBLESHOOTING

### Workflow no se triggeriz√≥

**S√≠ntomas**:
- No ves workflow en Actions tab
- Pasaron >2 minutos sin que se inicie

**Causas posibles**:
1. ‚ùå **T√≠tulo no matchea regex** (m√°s probable)
   - Verifica: `Solution - TestCandidate - Issue [001]`
   - Debe ser EXACTO (case-sensitive)
   - Debe tener ` - ` (espacio-gui√≥n-espacio)
   - Debe tener `[001]` (corchetes, 3 d√≠gitos)

2. ‚ùå **Workflow est√° deshabilitado** (poco probable)
   - Ve a: `.github/workflows/validate-solution.yml`
   - Verifica que no est√© commented

3. ‚ùå **Rama no existe en origin**
   - Verifica: `git push origin solution-testcandidate-issue001`
   - Debe estar pusheada

**Soluci√≥n**:
- Cierra el PR (no lo elimines)
- Verifica el t√≠tulo
- Crea nuevo PR con t√≠tulo correcto

---

### Workflow inici√≥ pero se detuvo

**S√≠ntomas**:
- Job inici√≥ pero muestra ‚ùå
- Logs muestran error

**Causas**:
- Error SQL Server setup
- Error en carga de bases de datos
- Error en validaci√≥n

**Soluci√≥n**:
- Haz clic en el job que fall√≥
- Expande los logs
- Busca el error (RED TEXT)
- Reporta el error en el repositorio

---

### Score < 70 (FAIL)

**S√≠ntomas**:
- Workflow complet√≥ ‚úÖ pero score < 70
- Comment muestra "NEEDS WORK"

**Soluciones**:
1. Revisa el comment detalladamente
2. Identifica qu√© fall√≥
3. Corrige los archivos en la rama
4. Haz push nuevamente (auto-comment update ser√° posted)

**Ejemplo de FAIL**:
```
‚ùå Score: 45/100
Status: FAIL - Needs Work

Issues Found:
- QA_ValidarIntegridadEstudiantes.sql: Syntax error on line 3
- SOLUTION.md: Word count 85 (required: 150+)
- PROC_ValidarIntegridadPreInsert.sql: Compilation failed
```

---

## ‚úÖ CHECKLIST - Antes de crear PR

- [ ] Rama `solution-testcandidate-issue001` creada
- [ ] 3 archivos en `Solutions/TestCandidate/Issue001/`
- [ ] Archivos pusheados a origin
- [ ] URL de PR ready: `https://github.com/ahernandezGH/bi-technical-assessment/pull/new/solution-testcandidate-issue001`
- [ ] T√≠tulo exacto memoriz√≥: `Solution - TestCandidate - Issue [001]`
- [ ] Body preparado (opcional)

---

## üìù SIGUIENTE PASO

Una vez creado el PR:

1. **Espera 5-8 minutos** para que el workflow complete
2. **Monitorea Actions tab** para ver progreso
3. **Lee el comment auto-posted** con los resultados
4. **Documenta los resultados** en `PHASE_5_4_RESULTS.md`

---

**Documento**: Step 6 de Phase 5.4  
**Siguiente**: Step 7 - Monitorear Workflow
